[gd_scene load_steps=4 format=1]

[ext_resource path="res://paddle/paddle/paddle.png" type="Texture" id=1]

[sub_resource type="CircleShape2D" id=1]

custom_solver_bias = 0.0
radius = 37.0

[sub_resource type="GDScript" id=2]

script/source = "extends Node\n\nconst MAX_DISTANCE = 256\nconst DEADZONE = 0.4\nconst SPEED = 500\nconst RECALL_SPEED = 150\n\nvar origin_pos\nvar pad_number\n\nfunc _ready():\n\tset_fixed_process(true)\n\nfunc set_fixed_position(position):\n\torigin_pos = position\n\tset_pos(origin_pos)\n\t\nfunc _fixed_process(delta):\n\tvar x_axis_value = Input.get_joy_axis(pad_number, 0)\n\tvar y_axis_value = Input.get_joy_axis(pad_number, 1)\n\t\n\tvar direction = Vector2(x_axis_value, y_axis_value)\n\tvar new_pos = get_new_pos(direction, SPEED, delta)\n\t\n\tif abs(direction.x) < DEADZONE && abs(direction.y) < DEADZONE:\n\t\trecall(delta)\n\telif (new_pos.distance_to(origin_pos) < MAX_DISTANCE):\n\t\tset_pos(new_pos)\n\telse:\n\t\trecall(delta)\n\t\n\tif get_pos().distance_to(origin_pos) > (MAX_DISTANCE - 15):\n\t\tInput.start_joy_vibration(pad_number, 1, 1)\n\telse:\n\t\tInput.stop_joy_vibration(pad_number)\n\nfunc recall(delta):\n\tvar recall_direction = (origin_pos - get_pos())\n\tvar new_pos = get_new_pos(recall_direction, RECALL_SPEED, delta)\n\t\n\tif(new_pos.distance_to(origin_pos) > 5):\n\t\tset_pos(new_pos)\n\nfunc get_new_pos(direction, speed, delta):\n\treturn get_pos() + direction.normalized() * speed * delta"

[node name="Paddle" type="Node"]

[node name="KinematicBody2D" type="KinematicBody2D" parent="."]

input/pickable = false
shapes/0/shape = SubResource( 1 )
shapes/0/transform = Matrix32( 1, 0, 0, 1, 0, 0 )
shapes/0/trigger = false
collision/layers = 1
collision/mask = 1
collision/margin = 0.08
script/script = SubResource( 2 )

[node name="Sprite" type="Sprite" parent="KinematicBody2D"]

texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="KinematicBody2D"]

shape = SubResource( 1 )
trigger = false
_update_shape_index = 0


